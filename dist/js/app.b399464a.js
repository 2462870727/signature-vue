(function(t){function e(e){for(var a,s,r=e[0],c=e[1],u=e[2],l=0,f=[];l<r.length;l++)s=r[l],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&f.push(i[s][0]),i[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={app:0},o=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var d=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"56d7":function(t,e,n){"use strict";n.r(e);n("a15b"),n("d81d"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("CanvasSign")],1)},o=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signature",on:{touchmove:function(t){t.preventDefault()}}},[n("div",{ref:"boardBox",staticClass:"boardBox"},[n("canvas",{ref:"board",attrs:{width:t.cWidth,height:t.cHeight,id:"canvas"},on:{touchstart:t.mStart,touchmove:t.mMove,touchend:t.mEnd}})]),n("div",{staticClass:"bar"},[n("div",{staticClass:"item",style:t.noRotate?"transform: rotate(0);":"transform: rotate(-90deg);",on:{click:t.clearcanvas}},[n("div",{staticClass:"ico"}),n("div",{staticClass:"text"},[t._v("重写")])]),n("div",{staticClass:"item",style:t.noRotate?"transform: rotate(0);":"transform: rotate(-90deg);",on:{click:t.getcanvas}},[n("div",{staticClass:"ico"}),n("div",{staticClass:"text"},[t._v("使用")])])])])},r=[],c=(n("d3b7"),n("ac1f"),n("466d"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("96cf"),n("1da1")),u={name:"CanvasSign",data:function(){return{familysignatureurl:"",basedata:"",ctx:null,point:{x:0,y:0},moving:!1,cWidth:null,cHeight:null,noRotate:null}},mounted:function(){var t=this.$refs.board;t.width=this.$refs.boardBox.offsetWidth,t.height=this.$refs.boardBox.offsetHeight,this.ctx=t.getContext("2d"),this.ctx.strokeStyle="#000",this.cWidth=document.documentElement.clientWidth,this.cHeight=document.documentElement.clientHeight,window.addEventListener("onorientationchange"in window?"orientationchange":"resize",this.hengshuping,!1)},methods:{hengshuping:function(){90==window.orientation||-90==window.orientation?(alert(this.cWidth),this.noRotate=!0):this.noRotate=!1},mStart:function(t){var e=t.touches[0].clientX-t.target.offsetLeft,n=t.touches[0].clientY-t.target.offsetTop;this.point.x=e,this.point.y=n,this.ctx.beginPath(),this.ctx.lineWidth=7,this.moving=!0},mMove:function(t){if(this.moving){var e=t.touches[0].clientX-t.target.offsetLeft,n=t.touches[0].clientY-t.target.offsetTop;this.ctx.moveTo(this.point.x,this.point.y),this.ctx.lineTo(e,n),this.ctx.stroke(),this.point.x=e,this.point.y=n}},mEnd:function(){this.moving&&(this.ctx.closePath(),this.moving=!1)},isCanvasEmpty:function(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,t.toDataURL()==e.toDataURL()},getcanvas:function(){var t=this,e=document.getElementById("canvas");this.isCanvasEmpty(e)?this.$myMsg.notify({content:"请绘制签名后再上传！",type:"error"}):document.getElementById("canvas").toBlob(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=new File([n],"pic.png",{type:n.type,lastModified:Date.now()}),t.convertImg(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},convertImg:function(t){var e=this,n=document.createElement("canvas"),a=n.getContext("2d"),i=new FileReader;i.readAsDataURL(t),i.onload=function(t){var i=new Image;i.src=t.target.result,i.onload=function(){var t=this.width,o=this.height,s=1080,r=1080,c=t,u=o;(t>s||o>r)&&(t/o>s/r?(c=s,u=Math.round(s*(o/t))):(u=r,c=Math.round(r*(t/o))));var d="image/png";n.width=u,n.height=c,a.rotate(Math.PI/2),a.drawImage(i,0,-u,c,u);var l=n.toDataURL(d);e.basedata=l,console.log(l),e.updatavue()}}},base64ToBlob:function(t){var e=t.split(","),n=e[0].match(/:(.*?);/)[1],a=atob(e[1]),i=a.length,o=new Uint8Array(i);while(i--)o[i]=a.charCodeAt(i);return new Blob([o],{type:n})},updatavue:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={code:"hand_sign/hand_img_upload",data:JSON.stringify({verifyId:"18668011733",handImg:t.basedata})},e.next=3,t.$Axios.post("hand_sign/hand_img_upload",n).then((function(e){console.log(e),t.$myMsg.notify({content:"签名成功",type:"success"})}));case 3:case"end":return e.stop()}}),e)})))()},clearcanvas:function(){var t=document.getElementById("canvas").getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),this.$myMsg.notify({content:"画板已清空，请重新签名",type:"success"})}}},d=u,l=(n("85e5"),n("2877")),f=Object(l["a"])(d,s,r,!1,null,"7f50a240",null),h=f.exports,p={name:"App",components:{CanvasSign:h}},v=p,m=(n("034f"),Object(l["a"])(v,i,o,!1,null,null,null)),g=m.exports,y=n("bc3a"),b=n.n(y),w=n("e813"),x=n.n(w),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide-fade"}},[t.notifyFlag?n("div",{staticClass:"my-notify"},["success"==t.type?n("div",{staticClass:"notify success"},[n("div",{staticClass:"tip"},[n("span",[t._v("成功")])]),n("div",{staticClass:"content"},[t._v(" "+t._s(t.content))])]):"error"==t.type?n("div",{staticClass:"notify error"},[n("div",{staticClass:"tip"},[n("span",[t._v("错误")])]),n("div",{staticClass:"content"},[t._v(t._s(t.content))])]):"warning"==t.type?n("div",{staticClass:"notify warning"},[n("div",{staticClass:"tip"},[n("span",[t._v("警告")])]),n("div",{staticClass:"content"},[t._v(t._s(t.content))])]):t._e()]):t._e()])},_=[],E=(n("acc7"),{}),O=Object(l["a"])(E,C,_,!1,null,"5fe2f292",null),R=O.exports,j=a["a"].extend(R),M=document.createElement("div");M.className="notify-wrap",M.style="position: fixed; left：0; top: 0; transition-duration: .5s;",document.body.appendChild(M);var $={notify:function(t){var e=t.content,n=t.type,a=t.time,i=void 0===a?1500:a,o=new j({el:document.createElement("div"),data:function(){return{notifyFlag:!0,time:i,content:e,type:n,timer:"",timeFlag:!1}},watch:{timeFlag:function(){this.timeFlag&&(this.notifyFlag=!1,window.clearTimeout(this.timer))}},created:function(){var t=this;this.timer=setTimeout((function(){t.timeFlag=!0}),this.time)},beforeDestroy:function(){window.clearTimeout(this.timer)}});M.appendChild(o.$el)}};function T(){a["a"].prototype.$myMsg=$}var S=T;a["a"].use(S),x.a.get((function(t){var e=t.map((function(t){return t.value})),n=x.a.x64hash128(e.join(""),31);b.a.defaults.headers.common["Agent"]=n})),b.a.defaults.baseURL="http://192.168.199.56:8088",b.a.defaults.headers.common["X-Token"]="2e8126cae7094de0874476447500456a",b.a.defaults.headers.common["AcCode"]="AC001",a["a"].prototype.$Axios=b.a,a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(g)}}).$mount("#app")},"85e5":function(t,e,n){"use strict";n("bc0c")},"85ec":function(t,e,n){},acc7:function(t,e,n){"use strict";n("e5b3")},bc0c:function(t,e,n){},e5b3:function(t,e,n){}});
//# sourceMappingURL=app.b399464a.js.map